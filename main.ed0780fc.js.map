{"version":3,"sources":["scripts/main.js"],"names":["ceils","document","querySelectorAll","score","querySelector","start","startText","loseText","winText","gameIsStart","checkChange","messageText","forEach","cell","textContent","classList","remove","checkStep","startGame","randomIndex1","Math","floor","random","length","randomIndex2","add","restartGame","handleButtonClick","generateNewCeil","emptyIndices","index","push","randomNumb","randomIndex","newValue","move","items","itemsFrom","j","k","value","moveLeft","i","row","Array","from","map","parseInt","checkRowChanges","moveRight","moveUp","column","checkColumnChanges","moveDown","checkChanges","m1","m2","newChange","console","log","cells","addEventListener","event","repeat","key","getElementById"],"mappings":"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","file":"main.ed0780fc.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst ceils = document.querySelectorAll('.field-cell');\nconst score = document.querySelector('.game-score');\nconst start = document.querySelector('#startButton');\n\nconst startText = document.querySelector('.message-start');\nconst loseText = document.querySelector('.message-lose');\nconst winText = document.querySelector('.message-win');\n\nlet gameIsStart = false;\n\nlet checkChange = [];\n\nfunction messageText() {\n  ceils.forEach((cell) => {\n    if (cell.textContent === '2048') {\n      winText.classList.remove('hidden');\n    }\n  });\n\n  if (checkStep() === false) {\n    loseText.classList.remove('hidden');\n  }\n}\n\nfunction startGame() {\n  const randomIndex1 = Math.floor(Math.random() * ceils.length);\n  const randomIndex2 = Math.floor(Math.random() * ceils.length);\n\n  ceils[randomIndex1].classList.add('field-cell--2');\n  ceils[randomIndex1].textContent = '2';\n\n  ceils[randomIndex2].classList.add('field-cell--2');\n  ceils[randomIndex2].textContent = '2';\n\n  start.classList = 'button restart';\n  start.textContent = 'Restart';\n\n  startText.classList.add('hidden');\n\n  gameIsStart = true;\n}\n\nfunction restartGame() {\n  ceils.forEach(cell => {\n    cell.textContent = '';\n    cell.classList = 'field-cell';\n  });\n\n  score.textContent = '0';\n  start.classList = 'button start';\n  start.textContent = 'Start';\n\n  loseText.classList.add('hidden');\n  startText.classList.remove('hidden');\n\n  gameIsStart = false;\n}\n\nfunction handleButtonClick() {\n  if (start.textContent === 'Start') {\n    startGame();\n  } else {\n    restartGame();\n  }\n}\n\nfunction generateNewCeil() {\n  const emptyIndices = [];\n\n  ceils.forEach((cell, index) => {\n    if (cell.textContent === '') {\n      emptyIndices.push(index);\n    }\n  });\n\n  if (emptyIndices.length === 0) {\n    return;\n  }\n\n  const randomNumb = Math.floor(Math.random() * emptyIndices.length);\n  const randomIndex = emptyIndices[randomNumb];\n\n  const probability = Math.random() < 0.1;\n  const newValue = probability ? '4' : '2';\n\n  ceils[randomIndex].textContent = newValue;\n  ceils[randomIndex].classList.add(`field-cell--${newValue}`);\n}\n\nfunction move(items, itemsFrom) {\n  if (itemsFrom === 0) {\n    for (let j = 1; j < 4; j++) {\n      if (items[j].textContent !== '') {\n        for (let k = j; k > 0; k--) {\n          const value = +items[k].textContent;\n\n          if (items[k - 1].textContent === '') {\n            items[k - 1].textContent = items[k].textContent;\n            items[k - 1].classList.add(`field-cell--${value}`);\n\n            items[k].textContent = '';\n            items[k].classList = 'field-cell';\n          } else if (items[k - 1].textContent === items[k].textContent) {\n            items[k - 1].textContent = value * 2;\n            items[k - 1].classList.add(`field-cell--${value * 2}`);\n\n            items[k].textContent = '';\n            items[k].classList = 'field-cell';\n\n            score.textContent = +score.textContent + value * 2;\n            break;\n          }\n        }\n      }\n    }\n  } else {\n    for (let j = 2; j >= 0; j--) {\n      if (items[j].textContent !== '') {\n        for (let k = j; k < 3; k++) {\n          const value = +items[k].textContent;\n\n          if (items[k + 1].textContent === '') {\n            items[k + 1].textContent = items[k].textContent;\n            items[k + 1].classList.add(`field-cell--${value}`);\n            items[k].textContent = '';\n            items[k].classList = 'field-cell';\n          } else if (items[k + 1].textContent === items[k].textContent) {\n            items[k + 1].textContent = value * 2;\n            items[k + 1].classList.add(`field-cell--${value * 2}`);\n\n            items[k].textContent = '';\n            items[k].classList = 'field-cell';\n\n            score.textContent = +score.textContent + value * 2;\n            break;\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction moveLeft() {\n  checkChange = [];\n\n  for (let i = 0; i < 4; i++) {\n    const row = document.querySelectorAll(`.field-row:nth-child(${i + 1}) .field-cell`);\n    checkChange.push(Array.from(row).map(cell => parseInt(cell.textContent) || 0))\n\n    move(row, 0);\n  }\n\n  checkRowChanges();\n  messageText();\n}\n\nfunction moveRight() {\n  checkChange = [];\n\n  for (let i = 0; i < 4; i++) {\n    const row = document.querySelectorAll(`.field-row:nth-child(${i + 1}) .field-cell`);\n    checkChange.push(Array.from(row).map(cell => parseInt(cell.textContent) || 0))\n\n    move(row, 1);\n  }\n\n  checkRowChanges();\n  messageText();\n}\n\nfunction moveUp() {\n  checkChange = [];\n\n  for (let i = 0; i < 4; i++) {\n    const column = document\n      .querySelectorAll(`.field-row .field-cell:nth-child(${i + 1})`);\n\n    checkChange.push(Array.from(column).map(cell => parseInt(cell.textContent) || 0));\n\n    move(column, 0);\n  }\n\n  checkColumnChanges();\n  messageText();\n}\n\nfunction moveDown() {\n  checkChange = [];\n\n  for (let i = 0; i < 4; i++) {\n    const column = document\n      .querySelectorAll(`.field-row .field-cell:nth-child(${i + 1})`);\n\n    checkChange.push(Array.from(column).map(cell => parseInt(cell.textContent) || 0));\n\n    move(column, 1);\n  }\n\n  checkColumnChanges()\n  messageText();\n}\n\nfunction checkChanges(m1, m2) {\n  if (m1.length !== m2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < m1.length; i++) {\n    for (let j = 0; j < m1[i].length; j++) {\n      if (m1[i][j] !== m2[i][j]) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nconst checkColumnChanges = () => {\n  let newChange = [];\n\n  for (let i = 0; i < 4; i++) {\n    const column = document\n      .querySelectorAll(`.field-row .field-cell:nth-child(${i + 1})`);\n\n    newChange.push(Array.from(column).map(cell => parseInt(cell.textContent) || 0));\n  }\n\n  if (!checkChanges(checkChange, newChange)) {\n    generateNewCeil();\n  }\n}\n\nconst checkRowChanges = () => {\n  let newChange = [];\n\n  for (let i = 0; i < 4; i++) {\n    const row = document.querySelectorAll(`.field-row:nth-child(${i + 1}) .field-cell`);\n\n    newChange.push(Array.from(row).map(cell => parseInt(cell.textContent) || 0));\n    \n  }\n\n  console.log(checkChange, newChange)\n\n  if (!checkChanges(checkChange, newChange)) {\n    generateNewCeil();\n  }\n}\n\nfunction checkStep() {\n  for (let i = 0; i < 4; i++) {\n    const row = document.querySelectorAll('.field-row')[i];\n    const cells = row.querySelectorAll('.field-cell');\n\n    for (let j = 0; j < 3; j++) {\n      if (cells[j].textContent === cells[j + 1].textContent\n        || cells[j].textContent === '') {\n        return true;\n      }\n    }\n  }\n\n  for (let i = 0; i < 4; i++) {\n    const column = document\n      .querySelectorAll(`.field-row .field-cell:nth-child(${i + 1})`);\n\n    for (let j = 0; j < 3; j++) {\n      if (column[j].textContent === column[j + 1].textContent\n        || column[j].textContent === '') {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\ndocument.addEventListener('keydown', () => {\n  if (event.repeat) {\n    return;\n  }\n\n  if (gameIsStart) {\n    switch (event.key) {\n      case 'ArrowLeft':\n        moveLeft();\n        break;\n      case 'ArrowRight':\n        moveRight();\n\n        break;\n      case 'ArrowUp':\n        moveUp();\n        break;\n      case 'ArrowDown':\n        moveDown();\n        break;\n      default:\n        break;\n    }\n  }\n\n});\n\ndocument\n  .getElementById('startButton')\n  .addEventListener('click', handleButtonClick);\n"]}